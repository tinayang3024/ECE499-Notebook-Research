# draw distribution plot
import matplotlib.pyplot as plt
import os
import numpy as np
fig = plt.figure(figsize = (10, 8))

data = {}
for i in range(0, 1700, 100):
    data["({}-{})".format(i, i+100)] = 0

# result = "+--------------+----------+\n\
#     | grps         | count(*) |\n\
#     +--------------+----------+\n\
#     | (0, 10)      |     1316 |\n\
#     | (10, 20)     |      368 |\n\
#     | (100, 110)   |       22 |\n\
#     | (1010, 1020) |        1 |\n\
#     | (1020, 1030) |        3 |\n\
#     | (1040, 1050) |        1 |\n\
#     | (1060, 1070) |        2 |\n\
#     | (1090, 1100) |        1 |\n\
#     | (110, 120)   |       18 |\n\
#     | (1100, 1110) |        3 |\n\
#     | (1130, 1140) |        1 |\n\
#     | (1160, 1170) |        1 |\n\
#     | (1180, 1190) |        2 |\n\
#     | (1190, 1200) |        1 |\n\
#     | (120, 130)   |       13 |\n\
#     | (1200, 1210) |        1 |\n\
#     | (1210, 1220) |        2 |\n\
#     | (1220, 1230) |        1 |\n\
#     | (1280, 1290) |        1 |\n\
#     | (1290, 1300) |        3 |\n\
#     | (130, 140)   |        9 |\n\
#     | (1300, 1310) |        2 |\n\
#     | (1310, 1320) |        1 |\n\
#     | (1320, 1330) |        2 |\n\
#     | (1330, 1340) |        1 |\n\
#     | (1340, 1350) |        1 |\n\
#     | (1350, 1360) |        2 |\n\
#     | (1360, 1370) |        1 |\n\
#     | (1370, 1380) |        1 |\n\
#     | (1390, 1400) |        1 |\n\
#     | (140, 150)   |       17 |\n\
#     | (1400, 1410) |        1 |\n\
#     | (1410, 1420) |        1 |\n\
#     | (1420, 1430) |        1 |\n\
#     | (1440, 1450) |        3 |\n\
#     | (1450, 1460) |        1 |\n\
#     | (1470, 1480) |        1 |\n\
#     | (150, 160)   |       14 |\n\
#     | (1500, 1510) |        1 |\n\
#     | (1530, 1540) |        1 |\n\
#     | (1560, 1570) |        2 |\n\
#     | (1590, 1600) |        3 |\n\
#     | (160, 170)   |       18 |\n\
#     | (1610, 1620) |        1 |\n\
#     | (1620, 1630) |        1 |\n\
#     | (1670, 1680) |        1 |\n\
#     | (1680, 1690) |        1 |\n\
#     | (170, 180)   |       19 |\n\
#     | (1720, 1730) |        1 |\n\
#     | (1750, 1760) |        1 |\n\
#     | (1770, 1780) |        1 |\n\
#     | (1780, 1790) |        1 |\n\
#     | (1790, 1800) |        1 |\n\
#     | (180, 190)   |       13 |\n\
#     | (1830, 1840) |        2 |\n\
#     | (1850, 1860) |        2 |\n\
#     | (1860, 1870) |        1 |\n\
#     | (1870, 1880) |        1 |\n\
#     | (1890, 1900) |        1 |\n\
#     | (190, 200)   |       14 |\n\
#     | (1900, 1910) |        1 |\n\
#     | (1910, 1920) |        1 |\n\
#     | (1920, 1930) |        1 |\n\
#     | (1940, 1950) |        1 |\n\
#     | (1950, 1960) |        1 |\n\
#     | (20, 30)     |      216 |\n\
#     | (200, 210)   |       12 |\n\
#     | (2030, 2040) |        1 |\n\
#     | (2040, 2050) |        1 |\n\
#     | (2050, 2060) |        1 |\n\
#     | (210, 220)   |       11 |\n\
#     | (2170, 2180) |        2 |\n\
#     | (220, 230)   |        5 |\n\
#     | (2260, 2270) |        1 |\n\
#     | (2270, 2280) |        1 |\n\
#     | (230, 240)   |        7 |\n\
#     | (2310, 2320) |        2 |\n\
#     | (2340, 2350) |        1 |\n\
#     | (2350, 2360) |        1 |\n\
#     | (2390, 2400) |        1 |\n\
#     | (240, 250)   |        5 |\n\
#     | (2430, 2440) |        1 |\n\
#     | (2450, 2460) |        3 |\n\
#     | (2470, 2480) |        1 |\n\
#     | (2480, 2490) |        1 |\n\
#     | (250, 260)   |        1 |\n\
#     | (2520, 2530) |        1 |\n\
#     | (2540, 2550) |        1 |\n\
#     | (260, 270)   |        8 |\n\
#     | (2600, 2610) |        1 |\n\
#     | (2620, 2630) |        2 |\n\
#     | (2680, 2690) |        1 |\n\
#     | (270, 280)   |        7 |\n\
#     | (2740, 2750) |        1 |\n\
#     | (280, 290)   |        8 |\n\
#     | (2810, 2820) |        1 |\n\
#     | (2850, 2860) |        1 |\n\
#     | (2860, 2870) |        1 |\n\
#     | (2870, 2880) |        1 |\n\
#     | (290, 300)   |        7 |\n\
#     | (2900, 2910) |        1 |\n\
#     | (30, 40)     |      139 |\n\
#     | (300, 310)   |        8 |\n\
#     | (3000, 3010) |        1 |\n\
#     | (3040, 3050) |        1 |\n\
#     | (310, 320)   |        5 |\n\
#     | (3140, 3150) |        1 |\n\
#     | (320, 330)   |        2 |\n\
#     | (3280, 3290) |        1 |\n\
#     | (330, 340)   |        5 |\n\
#     | (3300, 3310) |        1 |\n\
#     | (340, 350)   |        4 |\n\
#     | (350, 360)   |        3 |\n\
#     | (3500, 3510) |        1 |\n\
#     | (3550, 3560) |        1 |\n\
#     | (360, 370)   |        1 |\n\
#     | (3640, 3650) |        1 |\n\
#     | (3660, 3670) |        1 |\n\
#     | (370, 380)   |        5 |\n\
#     | (3730, 3740) |        2 |\n\
#     | (380, 390)   |        5 |\n\
#     | (3830, 3840) |        1 |\n\
#     | (3850, 3860) |        1 |\n\
#     | (390, 400)   |        1 |\n\
#     | (40, 50)     |      115 |\n\
#     | (400, 410)   |        5 |\n\
#     | (4030, 4040) |        1 |\n\
#     | (410, 420)   |        3 |\n\
#     | (4110, 4120) |        1 |\n\
#     | (420, 430)   |        6 |\n\
#     | (4240, 4250) |        1 |\n\
#     | (430, 440)   |        1 |\n\
#     | (4360, 4370) |        1 |\n\
#     | (440, 450)   |        1 |\n\
#     | (4400, 4410) |        1 |\n\
#     | (450, 460)   |        4 |\n\
#     | (460, 470)   |        3 |\n\
#     | (4610, 4620) |        1 |\n\
#     | (4720, 4730) |        1 |\n\
#     | (480, 490)   |        3 |\n\
#     | (4870, 4880) |        1 |\n\
#     | (490, 500)   |        3 |\n\
#     | (50, 60)     |       81 |\n\
#     | (500, 510)   |        2 |\n\
#     | (510, 520)   |        1 |\n\
#     | (520, 530)   |        3 |\n\
#     | (530, 540)   |        1 |\n\
#     | (5380, 5390) |        1 |\n\
#     | (5450, 5460) |        1 |\n\
#     | (550, 560)   |        5 |\n\
#     | (560, 570)   |        1 |\n\
#     | (5680, 5690) |        1 |\n\
#     | (570, 580)   |        1 |\n\
#     | (5790, 5800) |        1 |\n\
#     | (580, 590)   |        2 |\n\
#     | (590, 600)   |        2 |\n\
#     | (60, 70)     |       50 |\n\
#     | (600, 610)   |        2 |\n\
#     | (610, 620)   |        3 |\n\
#     | (620, 630)   |        3 |\n\
#     | (630, 640)   |        2 |\n\
#     | (640, 650)   |        2 |\n\
#     | (650, 660)   |        4 |\n\
#     | (660, 670)   |        1 |\n\
#     | (670, 680)   |        2 |\n\
#     | (680, 690)   |        2 |\n\
#     | (690, 700)   |        2 |\n\
#     | (70, 80)     |       44 |\n\
#     | (700, 710)   |        1 |\n\
#     | (7020, 7030) |        1 |\n\
#     | (710, 720)   |        1 |\n\
#     | (720, 730)   |        1 |\n\
#     | (730, 740)   |        1 |\n\
#     | (740, 750)   |        2 |\n\
#     | (7410, 7420) |        1 |\n\
#     | (750, 760)   |        2 |\n\
#     | (760, 770)   |        2 |\n\
#     | (790, 800)   |        1 |\n\
#     | (80, 90)     |       54 |\n\
#     | (800, 810)   |        2 |\n\
#     | (810, 820)   |        1 |\n\
#     | (820, 830)   |        2 |\n\
#     | (830, 840)   |        4 |\n\
#     | (8380, 8390) |        1 |\n\
#     | (840, 850)   |        2 |\n\
#     | (850, 860)   |        1 |\n\
#     | (870, 880)   |        2 |\n\
#     | (90, 100)    |       26 |\n\
#     | (930, 940)   |        2 |\n\
#     | (940, 950)   |        1 |\n\
#     | (950, 960)   |        1 |\n\
#     | (960, 970)   |        1 |\n\
#     | (970, 980)   |        1 |\n\
#     | (980, 990)   |        1 |\n\
#     | (9830, 9840) |        1 |\n\
#     | (990, 1000)  |        1 |\n\
#     +--------------+----------+\n\
#     "

# result = "+----------------+----------+\n\
# | grps           | count(*) |\n\
# +----------------+----------+\n\
# | (0, 100)       |   122781 |\n\
# | (100, 200)     |    91265 |\n\
# | (1000, 1100)   |      876 |\n\
# | (10000, 10100) |        1 |\n\
# | (1100, 1200)   |      655 |\n\
# | (1200, 1300)   |      454 |\n\
# | (12000, 12100) |        1 |\n\
# | (12700, 12800) |        1 |\n\
# | (1300, 1400)   |      307 |\n\
# | (1400, 1500)   |      279 |\n\
# | (1500, 1600)   |      206 |\n\
# | (1600, 1700)   |      153 |\n\
# | (1700, 1800)   |      120 |\n\
# | (1800, 1900)   |       75 |\n\
# | (1900, 2000)   |       60 |\n\
# | (200, 300)     |    35725 |\n\
# | (2000, 2100)   |       63 |\n\
# | (2100, 2200)   |       55 |\n\
# | (2200, 2300)   |       48 |\n\
# | (22200, 22300) |        1 |\n\
# | (2300, 2400)   |       54 |\n\
# | (23800, 23900) |        1 |\n\
# | (2400, 2500)   |       53 |\n\
# | (2500, 2600)   |       22 |\n\
# | (2600, 2700)   |       12 |\n\
# | (2700, 2800)   |       18 |\n\
# | (2800, 2900)   |       23 |\n\
# | (2900, 3000)   |       14 |\n\
# | (300, 400)     |    18157 |\n\
# | (3000, 3100)   |       15 |\n\
# | (3100, 3200)   |       15 |\n\
# | (3200, 3300)   |       13 |\n\
# | (3300, 3400)   |        8 |\n\
# | (3400, 3500)   |        8 |\n\
# | (3500, 3600)   |        4 |\n\
# | (3600, 3700)   |        6 |\n\
# | (3700, 3800)   |        4 |\n\
# | (3800, 3900)   |        6 |\n\
# | (3900, 4000)   |        9 |\n\
# | (400, 500)     |    10777 |\n\
# | (4000, 4100)   |        7 |\n\
# | (4100, 4200)   |        3 |\n\
# | (4200, 4300)   |        4 |\n\
# | (4300, 4400)   |        6 |\n\
# | (4400, 4500)   |        1 |\n\
# | (4500, 4600)   |        4 |\n\
# | (4700, 4800)   |        4 |\n\
# | (4800, 4900)   |        3 |\n\
# | (4900, 5000)   |        2 |\n\
# | (500, 600)     |     7612 |\n\
# | (5000, 5100)   |        5 |\n\
# | (5200, 5300)   |        1 |\n\
# | (5300, 5400)   |        2 |\n\
# | (5400, 5500)   |        2 |\n\
# | (5500, 5600)   |        4 |\n\
# | (5600, 5700)   |        3 |\n\
# | (5900, 6000)   |        1 |\n\
# | (600, 700)     |     4064 |\n\
# | (6000, 6100)   |        3 |\n\
# | (6100, 6200)   |        2 |\n\
# | (700, 800)     |     2756 |\n\
# | (7100, 7200)   |        1 |\n\
# | (7600, 7700)   |        1 |\n\
# | (7800, 7900)   |        1 |\n\
# | (800, 900)     |     1701 |\n\
# | (8100, 8200)   |        1 |\n\
# | (8600, 8700)   |        1 |\n\
# | (900, 1000)    |     1612 |\n\
# | 23900+         |    48454 |\n\
# +----------------+----------+ \n\
# "

result = "+----------------+----------+ \n\
| grps           | count(*) | \n\
+----------------+----------+ \n\
| (0, 10)        |   270511 | \n\
| (10, 20)       |    16374 | \n\
| (100, 110)     |      122 | \n\
| (110, 120)     |       90 | \n\
| (120, 130)     |      115 | \n\
| (1230, 1240)   |        1 | \n\
| (1240, 1250)   |        1 | \n\
| (130, 140)     |       50 | \n\
| (140, 150)     |       43 | \n\
| (150, 160)     |       45 | \n\
| (160, 170)     |       29 | \n\
| (170, 180)     |       34 | \n\
| (1760, 1770)   |        1 | \n\
| (180, 190)     |       26 | \n\
| (190, 200)     |       18 | \n\
| (20, 30)       |     4956 | \n\
| (200, 210)     |       12 | \n\
| (210, 220)     |       14 | \n\
| (220, 230)     |       13 | \n\
| (230, 240)     |       15 | \n\
| (240, 250)     |       10 | \n\
| (250, 260)     |       10 | \n\
| (260, 270)     |        4 | \n\
| (270, 280)     |        4 | \n\
| (280, 290)     |        8 | \n\
| (290, 300)     |        7 | \n\
| (30, 40)       |     2071 | \n\
| (300, 310)     |        8 | \n\
| (310, 320)     |        4 | \n\
| (320, 330)     |        4 | \n\
| (330, 340)     |        7 | \n\
| (340, 350)     |        4 | \n\
| (350, 360)     |        7 | \n\
| (360, 370)     |        4 | \n\
| (370, 380)     |        2 | \n\
| (380, 390)     |        2 | \n\
| (390, 400)     |        1 | \n\
| (40, 50)       |     1048 | \n\
| (400, 410)     |        3 | \n\
| (4040, 4050)   |        1 | \n\
| (410, 420)     |        2 | \n\
| (420, 430)     |        1 | \n\
| (430, 440)     |        1 | \n\
| (440, 450)     |        1 | \n\
| (450, 460)     |        1 | \n\
| (460, 470)     |        2 | \n\
| (480, 490)     |        2 | \n\
| (50, 60)       |      686 | \n\
| (500, 510)     |        2 | \n\
| (510, 520)     |        1 | \n\
| (520, 530)     |        2 | \n\
| (530, 540)     |        1 | \n\
| (540, 550)     |        1 | \n\
| (550, 560)     |        2 | \n\
| (560, 570)     |        1 | \n\
| (580, 590)     |        1 | \n\
| (590, 600)     |        1 | \n\
| (60, 70)       |      399 | \n\
| (600, 610)     |        2 | \n\
| (630, 640)     |        1 | \n\
| (640, 650)     |        1 | \n\
| (650, 660)     |        1 | \n\
| (66440, 66450) |        1 | \n\
| (670, 680)     |        2 | \n\
| (70, 80)       |      290 | \n\
| (710, 720)     |        1 | \n\
| (740, 750)     |        1 | \n\
| (760, 770)     |        1 | \n\
| (80, 90)       |      207 | \n\
| (90, 100)      |      163 | \n\
| (930, 940)     |        1 | \n\
| (950, 960)     |        1 | \n\
| 66450+         |    51147 | \n\
+----------------+----------+"

result = "\n\
+--------------+----------+\n\
| grps         | count(*) |\n\
+--------------+----------+\n\
| (0, 100)     |       82 |\n\
| (100, 200)   |       52 |\n\
| (1000, 1100) |       13 |\n\
| (1100, 1200) |        7 |\n\
| (1200, 1300) |        6 |\n\
| (1300, 1400) |        3 |\n\
| (1400, 1500) |        3 |\n\
| (1500, 1600) |        2 |\n\
| (1700, 1800) |        1 |\n\
| (1800, 1900) |        1 |\n\
| (1900, 2000) |        1 |\n\
| (200, 300)   |       70 |\n\
| (2100, 2200) |        1 |\n\
| (2200, 2300) |        4 |\n\
| (2300, 2400) |        3 |\n\
| (2400, 2500) |        2 |\n\
| (2500, 2600) |        1 |\n\
| (2600, 2700) |        1 |\n\
| (2700, 2800) |        1 |\n\
| (300, 400)   |       54 |\n\
| (3200, 3300) |        1 |\n\
| (400, 500)   |       56 |\n\
| (500, 600)   |       35 |\n\
| (600, 700)   |       30 |\n\
| (700, 800)   |       23 |\n\
| (800, 900)   |       26 |\n\
| (900, 1000)  |       10 |\n\
| nulls        |       11 |\n\
+--------------+----------+\n\
"

result = ";+------------+----------+\n\
| grps       | count(*) |\n\
+------------+----------+\n\
| (0, 10)    |      257 |\n\
| (10, 20)   |       88 |\n\
| (100, 110) |        3 |\n\
| (120, 130) |        1 |\n\
| (130, 140) |        1 |\n\
| (140, 150) |        2 |\n\
| (190, 200) |        1 |\n\
| (20, 30)   |       54 |\n\
| (200, 210) |        1 |\n\
| (270, 280) |        1 |\n\
| (30, 40)   |       34 |\n\
| (40, 50)   |       23 |\n\
| (50, 60)   |       14 |\n\
| (60, 70)   |        8 |\n\
| (70, 80)   |        4 |\n\
| (80, 90)   |        4 |\n\
| (90, 100)  |        2 |\n\
| nulls      |        2 |\n\
+------------+----------+"

result = "\n\
+--------------+----------+\n\
| grps         | count(*) |\n\
+--------------+----------+\n\
| (0, 100)     |    66361 |\n\
| (100, 200)   |      523 |\n\
| (1000, 1100) |        3 |\n\
| (1100, 1200) |        2 |\n\
| (1300, 1400) |        3 |\n\
| (1600, 1700) |        2 |\n\
| (200, 300)   |      173 |\n\
| (300, 400)   |       60 |\n\
| (400, 500)   |       53 |\n\
| (500, 600)   |       20 |\n\
| (600, 700)   |       12 |\n\
| (700, 800)   |       10 |\n\
| (800, 900)   |        6 |\n\
| (900, 1000)  |        7 |\n\
+--------------+----------+\n\
"
result = "\n\
+--------------+----------+\n\
| grps         | count(*) |\n\
+--------------+----------+\n\
| (0, 100)     |     8106 |\n\
| (100, 200)   |      523 |\n\
| (1000, 1100) |        3 |\n\
| (1100, 1200) |        2 |\n\
| (1300, 1400) |        3 |\n\
| (1600, 1700) |        2 |\n\
| (200, 300)   |      173 |\n\
| (300, 400)   |       60 |\n\
| (400, 500)   |       53 |\n\
| (500, 600)   |       20 |\n\
| (600, 700)   |       12 |\n\
| (700, 800)   |       10 |\n\
| (800, 900)   |        6 |\n\
| (900, 1000)  |        7 |\n\
+--------------+----------+"
key = ""
for line in result.split("\n"):
    if "--" in line or "count" in line:
        key = ""
        continue
    elif "(" in line:
        token = line.strip(" ").split("|")
        key_str = token[1].strip(" ")
        val = token[2].strip(" ")
        data[key_str.replace(", ", "-")] = int(val)
print(list(data.keys()))
print(list(data.values()))

with open("./distribution_top500versions.csv", 'w') as f:
    for key, val in data.items():
        rang = key.split("-")[1].strip(")")
        f.write('{},{}\n'.format(rang, val))
